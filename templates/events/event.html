<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
    <script type="text/javascript" src="https://www.google.com/jsapi?key=ABQIAAAAWajWEMOvdMUzDSviTnY9_BQCULP4XOMyhPd8d_NrQQEO8sT8XBSloh91HGZYV6pQ4yQ1gkhp8E4bJw"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="/js/markerclusterer.js"></script>

    <script type="text/javascript">

        var map;

        function initializeMap()
        {
            var latlng = new google.maps.LatLng(0, 0);
            var myOptions = {
                zoom: 2,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("locationMap"), myOptions);

            var mcOptions = {gridSize: 50, maxZoom: 14};
            mapCluster = new MarkerClusterer(map, [], mcOptions);

            locationsJson = "[{'lat': 40.6411848, 'city': '', 'lng': -8.6536169, 'country': 'Portugal'}, {'lat': 39.7443404, 'city': 'Leiria', 'lng': -8.8072495, 'country': 'Portugal'}]"
            locations = eval('(' + locationsJson + ')');

            for(i=0; i<locations.length; i++)
            {
                var marker = new google.maps.Marker({
                    position: new google.maps.LatLng(locations[i].lat, locations[i].lng)
                });

                mapCluster.addMarker(marker);
                //marker.setMap(map);
            }
        }

    </script>

</head>
<body onload="initializeMap()">

<table>
    <tr>
        <td>Target Type</td>
        <td>{{ targetType }}</td>
    </tr>
    <tr>
        <td>Event Type</td>
        <td>{{ type }}</td>
    </tr>
    <tr>
        <td>Event Target</td>
        <td>{{ target }}</td>
    </tr>
    <tr>
        <td>First Detection</td>
        <td>{{ firstdetection }}</td>
    </tr>
    <tr>
        <td>Last Detection</td>
        <td>{{ lastdetection }}</td>
    </tr>
    <tr>
        <td>Active</td>
        <td>{{ active }}</td>
    </tr>
    <tr>
        <td>Locations</td>
        <td>
            {% for location in locations %}
                {% if location.city %}
                    {{ location.city }},
                {% endif %}
                {{ location.country }}<br />
            {% endfor %}
        </td>
    </tr>
    <tr>
        <td>ISP</td>
        <td>
            {% for isp in isps %}
                {{ isp }}<br />
            {% endfor %}
        </td>
    </tr>
</table>

<br /><br />
<h2>Event Locations on Map</h2>
<br />

<div id="locationMap" style="width:800px; height:400px;">
</div>

</body>
</html>